(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["doll"],{"0ad0":function(t,e,n){t.exports=n.p+"static/media/1.7af277d6.mp3"},"0ca1":function(t,e){t.exports="data:image/png;base64,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"},"37b3":function(t,e,n){"use strict";n("7db0"),n("c740"),n("a9e3"),n("d3b7"),n("96cf");var s=n("1da1");e["a"]={components:{game:function(){return n.e("chunk-75365f9c").then(n.bind(null,"fc9b"))},svgs:function(){return n.e("chunk-2d0e1d37").then(n.bind(null,"7ba7"))}},data:function(){return{options:{},status:{},coinId:0,ointmentList:{current:{},queue:[]},webrtc:"",machineSetInterVal:"",endTime:0}},beforeDestroy:function(){clearInterval(this.machineSetInterVal)},deactivated:function(){clearInterval(this.machineSetInterVal)},computed:{user:function(){return this.$store.state.user||{}},gameType:function(){var t=this;return 1!==this.status.statusId&&!this.ointmentList.queue.find((function(e){return Number(e.userId)===Number(t.user.user.userId)}))},bookingNumber:function(){var t=this;return this.ointmentList.queue.findIndex((function(e){return Number(e.userId)===Number(t.user.user.userId)}))+1},existence:function(){var t=this.ointmentList.current;return t&&Number(t.userId)===Number(this.user.user.userId)}},created:function(){},methods:{machineStatus:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,s,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("coin/queryStatus",{coinId:t.coinId});case 2:return n=e.sent,e.next=5,t.$get("coin/AppointmentList",{coinId:t.coinId});case 5:s=e.sent,a=s.data,t.ointmentList=a.result[t.coinId],t.status=n.data.result,t.endTime=t.$moment(t.status.pushTime).diff(new Date,"second"),t.machineStatusCallBack&&t.machineStatusCallBack();case 11:case"end":return e.stop()}}),e)})))()},booking:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("/coin/Appointment",{coinId:t.coinId});case 2:t.$toast("参加排队成功"),t.machineStatus();case 4:case"end":return e.stop()}}),e)})))()}},activated:function(){var t=this;this.options=this.$route.query,this.coinId=parseInt(this.options.coinId),this.machineStatus(),this.machineSetInterVal=setInterval((function(){t.machineStatus()}),3e3)}}},"3a8c":function(t,e,n){},"49ac":function(t,e,n){"use strict";n("3a8c")},7523:function(t,e,n){"use strict";n.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"game"},[s("game",{attrs:{list:t.ointmentList}}),s("div",{staticClass:"game-flip",on:{click:t.toggleVideo}},[s("van-icon",{attrs:{name:"photograph"}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:t.readyType,expression:"readyType"}],staticClass:"ready"},[t._v(" ready Go ")]),s("div",{staticClass:"game-prize"},[s("van-row",{directives:[{name:"show",rawName:"v-show",value:t.existence,expression:"existence"}],class:t.gameType,attrs:{gutter:"20"}},[s("van-col",{attrs:{span:"12"}},[s("div",{staticClass:"prize"},[t._v("当前游戏币："+t._s(t.user.coin))])]),s("van-col",{attrs:{span:"12"}},[s("div",{staticClass:"prize"},[t._v("当前积分："+t._s(t.user.point))])])],1)],1),s("div",{staticClass:"game-box"},[s("transition",{attrs:{name:"el-fade-in-linear"}},[t.gameType?s("div",{staticClass:"dis-flex flex-x-center mb-20",on:{click:t.booking}},[s("svgs",{attrs:{type:4}})],1):1!==t.status.statusId?s("div",{staticClass:"game-box-booking"},[s("svgs",{attrs:{type:5}}),s("div",{staticClass:"game-box-booking-tag"},[t._v("排队中("+t._s(t.bookingNumber)+")")])],1):t._e(),s("div",{directives:[{name:"show",rawName:"v-show",value:1===t.status.statusId&&t.playType,expression:"status.statusId === 1 && playType"}]},[s("div",{staticClass:"game-begin"},[s("img",{staticClass:"photo",attrs:{src:n("0ca1"),alt:""}}),s("img",{staticClass:"big-photo",attrs:{src:n("b9af"),alt:""},on:{click:t.begin}}),s("img",{staticClass:"photo",attrs:{src:n("c2e4"),alt:""},on:{click:function(e){t.rechargeShow=!0}}})])])])],1),1!==t.status.statusId||t.playType?t._e():s("div",{staticClass:"control"},[s("div",{staticClass:"control-buttons"},t._l(4,(function(e){return s("div",{key:e,staticClass:"circle",class:"circle"+e},[s("van-icon",{staticClass:"triangle",class:[{"triangle-disabled":!t.state},"triangle"+e],attrs:{name:"play"},on:{click:function(n){return t.direction(e)}}})],1)})),0),s("div",{staticClass:"play"},[s("div",{staticClass:"play-time"},[s("van-count-down",{attrs:{time:t.time,format:"ss"},on:{finish:t.finish}}),t._v("S")],1),s("div",{staticClass:"play-button",class:{"play-button-disabled":!t.state},on:{click:t.play}},[t._v("GO")])])]),s("recharge",{attrs:{show:t.rechargeShow},model:{value:t.rechargeShow,callback:function(e){t.rechargeShow=e},expression:"rechargeShow"}}),t.existence?s("animation",{attrs:{time:t.endTime+7}}):t._e()],1)},a=[],i=(n("baa5"),n("a9e3"),n("d3b7"),n("96cf"),n("1da1")),r=n("37b3"),c={mixins:[r["a"]],components:{animation:function(){return n.e("chunk-681dc529").then(n.bind(null,"f242"))}},data:function(){return{time:3e4,playType:!0,rechargeShow:!1,camera:!0,audio:"",readyType:!1,state:!1}},activated:function(){this.playType=!0;var t=this.options.webrtc.lastIndexOf("/")+1;this.webrtc=this.options.webrtc.substring(0,t)+(Number(this.options.webrtc.substring(t))+1),this.$bus.$emit("toggleVideo",this.webrtc)},methods:{begin:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1===t.status.statusId){e.next=3;break}return t.$toast("机器在使用中！"),e.abrupt("return");case 3:return t.$toast.loading({duration:0,forbidClick:!0,message:"加载中"}),e.next=6,t.$get("coin/push",{coinId:t.coinId,userId:t.user.userId});case 6:if(s=e.sent,t.$toast.clear(),s.data.success){e.next=11;break}return t.$notify({type:"warning",message:s.data.msg,duration:1500}),e.abrupt("return");case 11:t.$bus.$emit("updateInfo"),t.audio||(t.audio=new Audio(n("0ad0"))),t.audio.play(),t.playType=!1,t.state=!0,t.readyType=!0,setTimeout((function(){t.readyType=!1}),2e3);case 18:case"end":return e.stop()}}),e)})))()},direction:function(t){this.state?this.$get("coin/Move",{coinId:this.coinId,moveType:[0,9,10,11,12][t]}):this.$toast("不能再移动了!")},play:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(t.state){e.next=3;break}return t.$toast("不能继续下抓了!"),e.abrupt("return");case 3:return e.next=5,t.$get("coin/Move",{coinId:t.coinId,moveType:13});case 5:t.state=!1,setTimeout((function(){t.playType=!t.playType,t.$bus.$emit("updateInfo"),t.queryPrize()}),15e3);case 7:case"end":return e.stop()}}),e)})))()},finish:function(){var t=this;this.playType=!0,setTimeout((function(){t.$bus.$emit("updateInfo"),t.queryPrize()}),15e3)},queryPrize:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("coin/queryPrize",{userId:t.user.user.userId,coinId:t.coinId});case 2:n=e.sent,s=n.data.result,t.$toast(1===s.returnNumber?"恭喜你中奖了":"很遗憾你没有中奖!");case 5:case"end":return e.stop()}}),e)})))()},toggleVideo:function(){this.camera=!this.camera;var t=this.webrtc.lastIndexOf("/")+1;this.webrtc=this.webrtc.substring(0,t)+(Number(this.webrtc.substring(t))+(this.camera?1:-1)),this.$bus.$emit("toggle",this.webrtc)}}},o=c,u=(n("49ac"),n("2877")),g=Object(u["a"])(o,s,a,!1,null,null,null);e["default"]=g.exports},"7db0":function(t,e,n){"use strict";var s=n("23e7"),a=n("b727").find,i=n("44d2"),r=n("ae40"),c="find",o=!0,u=r(c);c in[]&&Array(1)[c]((function(){o=!1})),s({target:"Array",proto:!0,forced:o||!u},{find:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}}),i(c)},b9af:function(t,e,n){t.exports=n.p+"static/img/2.7b0ebe07.png"},c2e4:function(t,e){t.exports="data:image/png;base64,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"}}]);