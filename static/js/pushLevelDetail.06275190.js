(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pushLevelDetail"],{1418:function(t,e,n){"use strict";n("1e8f")},"1e8f":function(t,e,n){},"37b3":function(t,e,n){"use strict";n("7db0"),n("c740"),n("a9e3"),n("d3b7"),n("96cf");var r=n("1da1");e["a"]={components:{game:function(){return n.e("chunk-75365f9c").then(n.bind(null,"fc9b"))},svgs:function(){return n.e("chunk-2d0e1d37").then(n.bind(null,"7ba7"))}},data:function(){return{options:{},status:{},coinId:0,ointmentList:{current:{},queue:[]},webrtc:"",machineSetInterVal:"",endTime:0}},beforeDestroy:function(){clearInterval(this.machineSetInterVal)},deactivated:function(){clearInterval(this.machineSetInterVal)},computed:{user:function(){return this.$store.state.user||{}},gameType:function(){var t=this;return 1!==this.status.statusId&&!this.ointmentList.queue.find((function(e){return Number(e.userId)===Number(t.user.user.userId)}))},bookingNumber:function(){var t=this;return this.ointmentList.queue.findIndex((function(e){return Number(e.userId)===Number(t.user.user.userId)}))+1},existence:function(){var t=this.ointmentList.current;return t&&Number(t.userId)===Number(this.user.user.userId)}},created:function(){},methods:{machineStatus:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){var n,r,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("coin/queryStatus",{coinId:t.coinId});case 2:return n=e.sent,e.next=5,t.$get("coin/AppointmentList",{coinId:t.coinId});case 5:r=e.sent,s=r.data,t.ointmentList=s.result[t.coinId],t.status=n.data.result,t.endTime=t.$moment(t.status.pushTime).diff(new Date,"second"),t.machineStatusCallBack&&t.machineStatusCallBack();case 11:case"end":return e.stop()}}),e)})))()},booking:function(){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("/coin/Appointment",{coinId:t.coinId});case 2:t.$toast("参加排队成功"),t.machineStatus();case 4:case"end":return e.stop()}}),e)})))()}},activated:function(){var t=this;this.options=this.$route.query,this.coinId=parseInt(this.options.coinId),this.machineStatus(),this.machineSetInterVal=setInterval((function(){t.machineStatus()}),3e3)}}},"7db0":function(t,e,n){"use strict";var r=n("23e7"),s=n("b727").find,i=n("44d2"),a=n("ae40"),u="find",c=!0,o=a(u);u in[]&&Array(1)[u]((function(){c=!1})),r({target:"Array",proto:!0,forced:c||!o},{find:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}}),i(u)},"92d0":function(t,e,n){"use strict";n.r(e);var r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game"},[n("vue-baberrage",{staticClass:"baberrage",attrs:{isShow:t.barrageIsShow,barrageList:t.barrageList,loop:t.barrageLoop}}),n("div",{staticClass:"game-flip",on:{click:t.play}},[n("van-icon",{attrs:{name:"photograph"}})],1),n("game",{attrs:{list:t.ointmentList}}),n("div",{staticClass:"game-box"},[n("van-row",{directives:[{name:"show",rawName:"v-show",value:t.existence,expression:"existence"}],staticClass:"m-10",attrs:{gutter:"20"}},[n("van-col",{attrs:{span:"12"}},[n("div",{staticClass:"prize"},[t._v("当前游戏币："+t._s(t.user.coin))])]),n("van-col",{attrs:{span:"12"}},[n("div",{staticClass:"prize"},[t._v("当前积分："+t._s(t.user.point))])]),n("van-col",{attrs:{span:"12"}},[n("div",{staticClass:"prize"},[t._v("本次投币："+t._s(t.num))])]),n("van-col",{attrs:{span:"12"}},[n("div",{staticClass:"prize"},[t._v("本次获得游戏币："+t._s(t.quitCoin))])])],1),n("transition",{attrs:{name:"el-fade-in-linear"}},[1===t.status.statusId?n("div",{staticClass:"dis-flex flex-x-around"},[n("div",{staticClass:"action",on:{click:t.pushCurrency}},[n("svgs",{attrs:{type:2}})],1),n("div",{staticClass:"action",on:{click:t.wiper}},[n("svgs",{attrs:{type:3}})],1)]):t._e(),t.gameType?n("div",{staticClass:"dis-flex flex-x-center mb-20",on:{click:t.booking}},[n("svgs",{attrs:{type:4}})],1):1!==t.status.statusId?n("div",{staticClass:"game-box-booking"},[n("svgs",{attrs:{type:5}}),n("div",{staticClass:"game-box-booking-tag"},[t._v("排队中("+t._s(t.bookingNumber)+")")])],1):t._e()])],1),t.existence?n("animation",{attrs:{time:t.endTime+1}}):t._e()],1)},s=[],i=(n("d3b7"),n("96cf"),n("1da1")),a=(n("1188"),n("37b3")),u={components:{animation:function(){return n.e("chunk-681dc529").then(n.bind(null,"f242"))}},mixins:[a["a"]],data:function(){var t=this;return{msg:"Hello vue-baberrage",barrageIsShow:!0,barrageLoop:!1,barrageList:[],num:0,quitCoin:0,pushCurrency:this.$global.throttle((function(){t.push()}),300)}},activated:function(){this.$bus.$emit("toggleVideo",this.options.webrtc)},methods:{machineStatusCallBack:function(){if(this.existence)return this.queryPrize(),void this.$bus.$emit("updateInfo");this.quitCoin=this.num=0},push:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1===t.status.statusId){e.next=3;break}return t.$notify({type:"warning",message:"机器在使用中！"}),e.abrupt("return");case 3:return e.next=5,t.$get("coin/push",{coinId:t.coinId,userId:t.user.user.userId});case 5:if(n=e.sent,n.data.success){e.next=8;break}return e.abrupt("return");case 8:++t.num;case 9:case"end":return e.stop()}}),e)})))()},queryPrize:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$get("coin/queryPrize",{userId:t.user.user.userId,coinId:t.coinId});case 2:n=e.sent,r=n.data.result,r.quitCoin,t.quitCoin=t.quitCoin+r.returnNumber;case 6:case"end":return e.stop()}}),e)})))()},wiper:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(1===t.status.statusId){e.next=3;break}return t.$notify({type:"warning",message:"机器在使用中！"}),e.abrupt("return");case 3:return e.next=5,t.$get("coin/wiper",{coinId:t.coinId,userId:t.user.user.userId});case 5:case"end":return e.stop()}}),e)})))()},play:function(){this.$bus.$emit("toggleVideo",this.options.webrtc)}}},c=u,o=(n("1418"),n("2877")),d=Object(o["a"])(c,r,s,!1,null,null,null);e["default"]=d.exports}}]);